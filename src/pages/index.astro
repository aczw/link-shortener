---
import { db, Link } from "astro:db";

import Layout from "@/layouts/layout.astro";

const links = await db.select().from(Link);
---

<Layout
  title="new Astro project"
  description="Hello world"
>
  <main class="flex min-h-screen flex-col items-center justify-center space-y-12">
    <form>
      <label>
        Original
        <input
          type="url"
          name="original"
          class="bg-purple-100"
        />
      </label>

      <label>
        Include numbers
        <input
          type="checkbox"
          name="numbers"
          checked
        />
      </label>
    </form>

    <section>
      <h2 class="font-bold">Recent links:</h2>
      <ul>
        {
          links.map(({ short, original }) => {
            const shortURL = `https://go.czw.sh/${short}`;

            return (
              <li>
                <a href={shortURL}>{shortURL}</a> redirects to <a href={original}>{original}</a>
              </li>
            );
          })
        }
      </ul>
    </section>
  </main>
</Layout>
