---
import { db, Link } from "astro:db";

import Layout from "@/layouts/layout.astro";

const links = await db.select().from(Link);
---

<Layout
  title="new Astro project"
  description="Hello world"
>
  <main class="flex min-h-screen items-center justify-center">
    <p class="font-bold">Links:</p>
    <ul>
      {
        links.map(({ short, original }) => {
          const shortURL = `https://go.czw.sh/${short}`;

          return (
            <li>
              <a href={shortURL}>{shortURL}</a> redirects to <a href={original}>{original}</a>
            </li>
          );
        })
      }
    </ul>
  </main>
</Layout>
